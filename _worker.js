(function(_0x1f647c,_0xa18029){const _0x2304d8=_0x28fd,_0x5657c3=_0x1f647c();while(!![]){try{const _0x4cf193=parseInt(_0x2304d8(0xc9))/0x1*(parseInt(_0x2304d8(0xbb))/0x2)+-parseInt(_0x2304d8(0xae))/0x3*(parseInt(_0x2304d8(0xa3))/0x4)+parseInt(_0x2304d8(0xbf))/0x5*(parseInt(_0x2304d8(0x97))/0x6)+-parseInt(_0x2304d8(0xb0))/0x7*(-parseInt(_0x2304d8(0x9b))/0x8)+-parseInt(_0x2304d8(0xb6))/0x9+-parseInt(_0x2304d8(0xa4))/0xa*(-parseInt(_0x2304d8(0xc8))/0xb)+-parseInt(_0x2304d8(0xb1))/0xc;if(_0x4cf193===_0xa18029)break;else _0x5657c3['push'](_0x5657c3['shift']());}catch(_0x54c507){_0x5657c3['push'](_0x5657c3['shift']());}}}(_0x5655,0x502b2));import{connect}from'cloudflare:sockets';let userID='d342d11e-d424-4583-b36e-524ab1f0afa4',proxyIP='';const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2;function _0x5655(){const _0x1ef9ef=[':443?encryption=none&security=tls&sni=','write','application/dns-message','error','11uZCHkH','1ujkxIO','readable','WebSocket\x20is\x20closed','websocket','match','set','2701950AfRryz','join','some','arrayBuffer','8fhFRUq','buffer','UUID','toString','charCodeAt','&path=%2F%3Fed%3D2560#','sec-websocket-protocol','https://cloudflare-dns.com/dns-query','47076RxQpjt','3103130AfKnqB','headers','map','push','values','decode','text/plain;charset=utf-8','byteLength','readyState','slice','21SucDhh','message','3814377QxGnDM','5470908TWPoQK','replace','get','getUint16','url','3981582XnCWYE','pipeTo','Not\x20found','addEventListener','value','7022iAkVEG','closed','getWriter','enqueue','5rpkuho','accept','catch','Upgrade','writable'];_0x5655=function(){return _0x1ef9ef;};return _0x5655();}export default{async 'fetch'(_0x429780,_0xc192fc,_0x61a6e9){const _0x343dab=_0x28fd;try{userID=_0xc192fc[_0x343dab(0x9d)]||userID,proxyIP=_0xc192fc['PROXYIP']||proxyIP;const _0x51b1e9=_0x429780[_0x343dab(0xa5)]['get'](_0x343dab(0xc2));if(_0x51b1e9&&_0x51b1e9===_0x343dab(0x94))return await ressOverWSHandler(_0x429780);const _0x1b4734=new URL(_0x429780[_0x343dab(0xb5)]);switch(_0x1b4734['pathname']){case'/':return new Response(JSON['stringify'](_0x429780['cf']),{'status':0xc8});case'/'+userID:{const _0x751a12=getConfig(userID,_0x429780[_0x343dab(0xa5)][_0x343dab(0xb3)]('Host'));return new Response(_0x751a12,{'status':0xc8,'headers':{'Content-Type':_0x343dab(0xaa)}});}default:return new Response(_0x343dab(0xb8),{'status':0x194});}}catch(_0x1da536){return new Response(_0x1da536[_0x343dab(0x9e)]());}}};async function ressOverWSHandler(_0x1e85cb){const _0x1535ca=_0x28fd,_0x562df0=new WebSocketPair(),[_0x23c98c,_0x458e28]=Object[_0x1535ca(0xa8)](_0x562df0);_0x458e28[_0x1535ca(0xc0)]();let _0x48a9b2='';const _0x7b4b92=_0x1e85cb[_0x1535ca(0xa5)][_0x1535ca(0xb3)](_0x1535ca(0xa1))||'',_0x41296d=makeWebStream(_0x458e28,_0x7b4b92);let _0x1478be={'value':null},_0x52534e=null,_0x37d65d=![];return _0x41296d[_0x1535ca(0xb7)](new WritableStream({async 'write'(_0x525d67,_0xbbd0d2){const _0x45336e=_0x1535ca;if(_0x37d65d&&_0x52534e)return _0x52534e(_0x525d67);if(_0x1478be[_0x45336e(0xba)]){const _0x36d167=_0x1478be[_0x45336e(0xba)][_0x45336e(0xc3)][_0x45336e(0xbd)]();await _0x36d167['write'](_0x525d67),_0x36d167['releaseLock']();return;}const {hasError:_0x4fb1b9,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:_0xd85d76,ressVersion:ressVersion=new Uint8Array([0x0,0x0]),isUDP:_0x13c73f}=processRessHeader(_0x525d67,userID);_0x48a9b2=addressRemote;if(_0x4fb1b9)return;if(_0x13c73f){if(portRemote===0x35)_0x37d65d=!![];else return;}const _0xbd4e8c=new Uint8Array([ressVersion[0x0],0x0]),_0x2e801a=_0x525d67['slice'](_0xd85d76);if(_0x37d65d){const {write:_0x276665}=await handleUDPOutBound(_0x458e28,_0xbd4e8c);_0x52534e=_0x276665,_0x52534e(_0x2e801a);return;}handleTCPOutBound(_0x1478be,addressRemote,portRemote,_0x2e801a,_0x458e28,_0xbd4e8c);}}))[_0x1535ca(0xc1)](_0x3632b0=>{closeWebSocket(_0x458e28);}),new Response(null,{'status':0x65,'webSocket':_0x23c98c});}async function handleTCPOutBound(_0x18b2d2,_0x2545c9,_0x4fc990,_0x340838,_0x458847,_0x437499){async function _0x235f94(_0x44d951,_0x121003){const _0x59ef94=_0x28fd;(!_0x18b2d2[_0x59ef94(0xba)]||_0x18b2d2[_0x59ef94(0xba)][_0x59ef94(0xbc)])&&(_0x18b2d2[_0x59ef94(0xba)]=connect({'hostname':_0x44d951,'port':_0x121003}));const _0x5b6fae=_0x18b2d2[_0x59ef94(0xba)][_0x59ef94(0xc3)][_0x59ef94(0xbd)]();return await _0x5b6fae[_0x59ef94(0xc5)](_0x340838),_0x5b6fae['releaseLock'](),_0x18b2d2[_0x59ef94(0xba)];}async function _0x13b36d(_0x5744cd,_0x51394d){const _0x160b3c=await _0x235f94(_0x5744cd,_0x51394d);return forwardToData(_0x160b3c,_0x458847,_0x437499);}try{!await _0x13b36d(_0x2545c9,_0x4fc990)&&!await _0x13b36d(proxyIP,_0x4fc990)&&closeWebSocket(_0x458847);}catch(_0x4db7fa){closeWebSocket(_0x458847);}}function makeWebStream(_0x5505ba,_0x2cc06e){let _0x2a47e8=![];const _0x3ef8bd=(_0x26a0ae,_0x2b25f2)=>{const _0x40f63b=_0x28fd;!_0x2a47e8&&_0x2b25f2[_0x40f63b(0xbe)](_0x26a0ae['data']);},_0x1c124e=_0x527d96=>{!_0x2a47e8&&(_0x527d96['close'](),closeWebSocket(_0x5505ba));},_0x25cee1=(_0x402747,_0x4a23cf)=>{_0x4a23cf['error'](_0x402747),closeWebSocket(_0x5505ba);},_0x1662db=new ReadableStream({'start'(_0x51119f){const _0x374319=_0x28fd;_0x5505ba['addEventListener'](_0x374319(0xaf),_0x9ecc6c=>_0x3ef8bd(_0x9ecc6c,_0x51119f)),_0x5505ba['addEventListener']('close',()=>_0x1c124e(_0x51119f)),_0x5505ba[_0x374319(0xb9)](_0x374319(0xc7),_0x153052=>_0x25cee1(_0x153052,_0x51119f));const {earlyData:_0x1a52bd,error:_0x4275a9}=base64ToBuffer(_0x2cc06e);if(_0x4275a9)_0x51119f['error'](_0x4275a9);else _0x1a52bd&&_0x51119f[_0x374319(0xbe)](_0x1a52bd);},'cancel'(_0x4f0baa){!_0x2a47e8&&(_0x2a47e8=!![],closeWebSocket(_0x5505ba));}});return _0x1662db;}let cachedUserID;function processRessHeader(_0x28ab18,_0x2f41c9){const _0x215142=_0x28fd;if(_0x28ab18[_0x215142(0xab)]<0x18)return{'hasError':!![]};const _0x2a9dbf=new Uint8Array(_0x28ab18[_0x215142(0xad)](0x0,0x1));let _0x4f7163=![];!cachedUserID&&(cachedUserID=new Uint8Array(_0x2f41c9[_0x215142(0xb2)](/-/g,'')[_0x215142(0x95)](/../g)[_0x215142(0xa6)](_0x2df566=>parseInt(_0x2df566,0x10))));const _0x59bbac=new Uint8Array(_0x28ab18['slice'](0x1,0x11)),_0x1599ec=_0x59bbac[_0x215142(0x99)]((_0x342467,_0x4d559e)=>_0x342467!==cachedUserID[_0x4d559e]);if(_0x1599ec)return{'hasError':!![]};const _0x41cbe4=new Uint8Array(_0x28ab18[_0x215142(0xad)](0x11,0x12))[0x0],_0x54d555=new Uint8Array(_0x28ab18['slice'](0x12+_0x41cbe4,0x12+_0x41cbe4+0x1))[0x0];if(_0x54d555===0x2)_0x4f7163=!![];else{if(_0x54d555!==0x1)return{'hasError':![]};}const _0x49990a=0x12+_0x41cbe4+0x1,_0x5d5722=_0x28ab18[_0x215142(0xad)](_0x49990a,_0x49990a+0x2),_0x13d1f7=new DataView(_0x5d5722)[_0x215142(0xb4)](0x0);let _0x5b8849=_0x49990a+0x2;const _0x3984b5=new Uint8Array(_0x28ab18[_0x215142(0xad)](_0x5b8849,_0x5b8849+0x1)),_0x281a78=_0x3984b5[0x0];let _0x5b551c=0x0,_0x524e81=_0x5b8849+0x1,_0x23d583='';switch(_0x281a78){case 0x1:_0x5b551c=0x4,_0x23d583=new Uint8Array(_0x28ab18[_0x215142(0xad)](_0x524e81,_0x524e81+_0x5b551c))[_0x215142(0x98)]('.');break;case 0x2:_0x5b551c=new Uint8Array(_0x28ab18[_0x215142(0xad)](_0x524e81,_0x524e81+0x1))[0x0],_0x524e81+=0x1,_0x23d583=new TextDecoder()[_0x215142(0xa9)](_0x28ab18[_0x215142(0xad)](_0x524e81,_0x524e81+_0x5b551c));break;case 0x3:_0x5b551c=0x10;const _0x5c43ff=new DataView(_0x28ab18[_0x215142(0xad)](_0x524e81,_0x524e81+_0x5b551c)),_0x1afeb9=[];for(let _0x7d5c08=0x0;_0x7d5c08<0x8;_0x7d5c08++){_0x1afeb9[_0x215142(0xa7)](_0x5c43ff[_0x215142(0xb4)](_0x7d5c08*0x2)[_0x215142(0x9e)](0x10));}_0x23d583=_0x1afeb9['join'](':');break;default:return{'hasError':!![]};}if(!_0x23d583)return{'hasError':!![]};return{'hasError':![],'addressRemote':_0x23d583,'addressType':_0x281a78,'portRemote':_0x13d1f7,'rawDataIndex':_0x524e81+_0x5b551c,'ressVersion':_0x2a9dbf,'isUDP':_0x4f7163};}async function forwardToData(_0x300244,_0x2fe5e0,_0x4a64d2){const _0x1712fd=_0x28fd;let _0x53a159=![];return await _0x300244[_0x1712fd(0xca)][_0x1712fd(0xb7)](new WritableStream({async 'write'(_0x48ece6,_0x13ae72){const _0x5c72b8=_0x1712fd;_0x2fe5e0[_0x5c72b8(0xac)]!==WS_READY_STATE_OPEN&&_0x13ae72[_0x5c72b8(0xc7)](_0x5c72b8(0xcb));let _0x55a9ee;_0x4a64d2?(_0x55a9ee=new Uint8Array(_0x4a64d2[_0x5c72b8(0xab)]+_0x48ece6['byteLength']),_0x55a9ee[_0x5c72b8(0x96)](_0x4a64d2,0x0),_0x55a9ee[_0x5c72b8(0x96)](_0x48ece6,_0x4a64d2['byteLength']),_0x4a64d2=null):_0x55a9ee=_0x48ece6,_0x2fe5e0['send'](_0x55a9ee),_0x53a159=!![];}}))[_0x1712fd(0xc1)](_0x33b0e2=>{closeWebSocket(_0x2fe5e0);}),_0x53a159;}function base64ToBuffer(_0x224339){const _0x26afd2=_0x28fd;if(!_0x224339)return{'error':null};try{const _0x30253b=_0x224339[_0x26afd2(0xb2)](/-/g,'+')['replace'](/_/g,'/'),_0x5eefa1=atob(_0x30253b),_0x45fda1=_0x5eefa1['length'],_0x2d2b47=new Uint8Array(_0x45fda1);for(let _0x261870=0x0;_0x261870<_0x45fda1;_0x261870++){_0x2d2b47[_0x261870]=_0x5eefa1[_0x26afd2(0x9f)](_0x261870);}return{'earlyData':_0x2d2b47['buffer'],'error':null};}catch(_0x35e1a2){return{'error':_0x35e1a2};}}function _0x28fd(_0x5e4b02,_0x107e7f){const _0x5655f0=_0x5655();return _0x28fd=function(_0x28fd90,_0x2da06a){_0x28fd90=_0x28fd90-0x94;let _0x51caa3=_0x5655f0[_0x28fd90];return _0x51caa3;},_0x28fd(_0x5e4b02,_0x107e7f);}function closeWebSocket(_0x5bd7b7){const _0xa0b416=_0x28fd;(_0x5bd7b7[_0xa0b416(0xac)]===WS_READY_STATE_OPEN||_0x5bd7b7[_0xa0b416(0xac)]===WS_READY_STATE_CLOSING)&&_0x5bd7b7['close']();}async function handleUDPOutBound(_0x15dcaa,_0x388410){const _0x5a64bd=_0x28fd;let _0x209f3=![],_0x286a51=null;const _0x1469a3=new TransformStream({'transform'(_0x2d3b84,_0x1a9143){const _0xfa9ac8=_0x28fd;_0x286a51&&(_0x2d3b84=new Uint8Array([..._0x286a51,..._0x2d3b84]),_0x286a51=null);let _0x2ab56c=0x0;while(_0x2ab56c<_0x2d3b84[_0xfa9ac8(0xab)]){if(_0x2d3b84['byteLength']<_0x2ab56c+0x2){_0x286a51=_0x2d3b84[_0xfa9ac8(0xad)](_0x2ab56c);break;}const _0x30ee75=new DataView(_0x2d3b84[_0xfa9ac8(0x9c)],_0x2d3b84['byteOffset']+_0x2ab56c,0x2)[_0xfa9ac8(0xb4)](0x0),_0x4a6348=_0x2ab56c+0x2+_0x30ee75;if(_0x2d3b84['byteLength']<_0x4a6348){_0x286a51=_0x2d3b84[_0xfa9ac8(0xad)](_0x2ab56c);break;}const _0x17013f=_0x2d3b84[_0xfa9ac8(0xad)](_0x2ab56c+0x2,_0x4a6348);_0x2ab56c=_0x4a6348,_0x1a9143[_0xfa9ac8(0xbe)](_0x17013f);}}});_0x1469a3[_0x5a64bd(0xca)][_0x5a64bd(0xb7)](new WritableStream({async 'write'(_0x49c17a){const _0x4decf5=_0x5a64bd,_0x4b4659=await fetch(_0x4decf5(0xa2),{'method':'POST','headers':{'Content-Type':_0x4decf5(0xc6)},'body':_0x49c17a}),_0x4b6659=await _0x4b4659[_0x4decf5(0x9a)](),_0x3e067f=new Uint8Array([_0x4b6659['byteLength']>>0x8&0xff,_0x4b6659[_0x4decf5(0xab)]&0xff]),_0x5e7628=_0x209f3?new Uint8Array([..._0x3e067f,...new Uint8Array(_0x4b6659)]):new Uint8Array([..._0x388410,..._0x3e067f,...new Uint8Array(_0x4b6659)]);_0x209f3=!![],_0x15dcaa['readyState']===WS_READY_STATE_OPEN&&_0x15dcaa['send'](_0x5e7628);}}));const _0x5c8df0=_0x1469a3[_0x5a64bd(0xc3)][_0x5a64bd(0xbd)]();return{'write'(_0x3abfdc){_0x5c8df0['write'](_0x3abfdc);}};}function getConfig(_0x312b4d,_0x24cbaf){const _0x23db0e=_0x28fd;return'vless://'+_0x312b4d+'@'+_0x24cbaf+_0x23db0e(0xc4)+_0x24cbaf+'&fp=randomized&type=ws&host='+_0x24cbaf+_0x23db0e(0xa0)+_0x24cbaf;}
